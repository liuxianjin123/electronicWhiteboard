<template>
  <div>
    <a-menu v-model="current" mode="horizontal">
      <a-menu-item key="ChangeShifts">
        <router-link to="/ChangeShifts"> <a-icon type="apartment" />人员分组</router-link> </a-menu-item>
      <a-menu-item key="ShiftSetting"> <a-icon type="usergroup-delete" />交接班设置</a-menu-item>
    </a-menu>
    <div class="container row">
        <div class="p1">
          <div class="nav_bar row">
            <div class="nb_1">
              <span></span>
              <div>交班班次设置</div>
            </div>
            <div class="nb_2" @click="FrequencyAdd(p1_Frequency)"><img src="../../../../static/images/ChangeShifts/增加 (3).png" width="30px" alt=""></div>
          </div>
          <div class="tab_h row">
              <div class="th_1" style="flex:2">班次</div>
              <div class="th_2" style="flex:7">时间设置</div>
              <div class="th_3" style="flex:3">是否启用</div>
          </div>
          <div class="tab_r">
            <div class="row p1_tr" v-for="(Frequency,index) in AbnormalDegree(p1_Frequency,0,3)" :key="index">
                <div class="tr_1" style="flex:2">
                  <img :src='Frequency.scr' width="25px" alt=""> {{Frequency.name}} 
                </div>
                <div class="tr_2" style="flex:7">
                  <input class="p1_input" type="time" v-model="Frequency.start"> 至 <input class="p1_input" type="time" v-model="Frequency.end">
                </div>
                <div class="tr_3" style="flex:3">
                  <a-switch checked-children="ON" un-checked-children="OFF" @click="Frequencystate(index)" :default-checked='Frequency.state==1'/>
                </div>
            </div>
           
            <div class="row p1_tr p1_add" v-for="(Frequency,index) in AbnormalDegree(p1_Frequency,3,p1_Frequency.lenthg)" :key="'custom'+index">
                <div class="tr_1" style="flex:2">
                   <input class="p1index_add" type="text" maxlength="4" v-model="Frequency.name" placeholder="班次名称">
                </div>
                <div class="tr_2" style="flex:7">
                  <input class="p1_input" type="time" v-model="Frequency.start"> 至 <input class="p1_input" type="time" v-model="Frequency.end">
                </div>
                <div class="tr_3" style="flex:3">
                  <a-button type="danger" @click="FrequencyDelete(p1_Frequency,index+3)"> 删除 </a-button>
                </div>
            </div>

              
          </div>
        </div>
        <div class="p2">
            <div class="nav_bar row">
              <div class="nb_1">
                <span></span>
                <div>交班内容设置</div>
              </div>
            </div>
            <div class="tab_r" style="text-align: left;">
                <div class="p2_tr" :class="{p2_Select:capacity.state==1}" @click="p2_content(index)" v-for="(capacity,index) in p2_capacity" :key="index">
                  <img :src="p2_img" v-show="capacity.state==0" width="25px" alt="">
                  <img :src="p2_imgSelect" v-show="capacity.state==1" width="25px" alt="">
                   <span>{{capacity.name}}</span>
                </div>
            </div>




        </div>
        <div class="p3">
            <div class="nav_bar row">
              <div class="nb_1">
                <span></span>
                <div>异常值显示设置</div>
              </div>
            </div>
            <div class="tab_r">
                <div class="p3_tr" v-for="(Outliers,index) in AbnormalDegree(p3_Outliers,0,2)" :key="index+'degree'">
                   <span>{{Outliers.name}}： </span>
                   <div class="yichang">{{Outliers.size}}</div>
                   <div class="yc_value"><input type="text" v-model="Outliers.degree">°C</div>
                   <div class="yc_color"></div>
                </div>
                <div class="p3_tr dashed"></div>
                 <div class="p3_tr dashed"  v-for="(Outliers,index) in AbnormalDegree(p3_Outliers,2,p3_Outliers.lenthg)" :key="index">
                   <span>{{Outliers.name}}： </span>
                   <div class="yichang">{{Outliers.size}}</div>
                   <div class="yc_value"><input type="number" v-model="Outliers.degree">°C</div>
                   <div class="yc_color"></div>
                </div>

            </div>

        </div>        
    </div>
    <div class="button_right">
          <a-button type="primary"> 保存 </a-button>  
          <a-button> 重置 </a-button>  
    </div>
  </div>
</template>
<script>

export default {
    name: "ShiftSetting",
    data() {
        return {
            current: ['ShiftSetting'],
            // Group_name:'未命名',//添加班次名称
            p1_Frequency:[{name:'白班',start:'09:30',end:'17:30',state:1,scr:'../../../../static/images/ChangeShifts/太阳 (1).png'},
                         {name:'小夜',start:'16:30',end:'23:50',state:0,scr:'../../../../static/images/ChangeShifts/星星-线.png'},
                         {name:'大夜',start:'20:30',end:'10:00',state:1,scr:'../../../../static/images/ChangeShifts/月亮 (2).png'},
                         {name:'大夜1',start:'20:30',end:'10:00',state:'',scr:''},
                         {name:'大夜2',start:'20:30',end:'10:00',state:'',scr:''},
                         {name:'大3',start:'20:30',end:'10:00',state:'',scr:''},],
            p1_FrequencyAdd:"",
            p2_capacity:[{name:'危重患者',state:1},
                         {name:'今日手术患者',state:0},
                         {name:'新入患者',state:0},
                         {name:'明日手术患者',state:1},
                         {name:'病危患者',state:0},
                         {name:'高风险患者',state:0},
                         {name:'转出患者',state:0},
                         {name:'出院患者',state:0},
                         {name:'转入患者',state:0}],//选中state为1,
            p2_imgSelect:'../../../../static/images/ChangeShifts/关注 (1).png',
            p2_img:'../../../../static/images/ChangeShifts/关注.png',
            p3_Outliers:[{name:'体温',size:'>',degree:'36.5'},
                         {name:'体温',size:'<',degree:'36.5'},
                         {name:'呼吸',size:'>',degree:'36.5'},
                         {name:'脉搏',size:'>',degree:'190'},
                         {name:'血氧饱和度',size:'>',degree:'80'}],
            value:'',
            
      
        };
    },
    components:{
        
    },
    
    methods: {
        p2_content(index){
          if(this.p2_capacity[index].state==0){
              this.isSpot=1;
              this.p2_capacity[index].state=1;
          }else{
              this.p2_capacity[index].state=0;
              this.isSpot=0;
          }
        },
        AbnormalDegree(arr,start,end){//返回所需数组
            return arr.slice(start,end);
        },
        Frequencystate(index){//点击开关
        if(this.p1_Frequency[index].state==0){
          this.p1_Frequency[index].state=1;
        }else{
          this.p1_Frequency[index].state=0;
        }
          
        },
        FrequencyDelete(arr,index){//交班班次 删除
          arr.splice(index,1);
          console.log(arr,index)
        },
        FrequencyAdd(arr){//增加指定数值
          arr.push(this.p1_FrequencyAdd);
          console.log(arr)

        }



    }

}
</script>
<style scoped>
.container{
    padding: 20px;
    width: 100%;
    height: 690px;

}
.button_right{
  margin-right: 5%;
  float: right;
}
.row{
   display: flex;
  flex-direction:row;
}
.container>div{
  flex: 1;
  margin-left: 15px;
  margin-right: 15px;
  border:1px solid #eee;
  border-radius: 5px;
  box-shadow: 8px 8px 5px #c7c6c6;
  overflow: auto;
}
.nav_bar{
  padding:10px 30px;
  /* border:1px solid #eee; */
  height: 70px;
}
.nb_1{
  flex: 10;
  line-height: 50px;

}
.nb_1>span{
  display: inline-block;
  width: 15px;
  height: 15px;
  background-color: #F59A23;
  border-radius: 50%;
}
.nb_1>div{
  display: inline-block;
  font-weight: bold;
  font-size: 16px;

}
.nb_2{
  flex: 1;
  line-height: 50px;
}
.tab_h{
  background-color: #F2F2F2;
  font-weight: bold;
}
.tab_r{
  height: 500px;
  overflow: auto;
}
.tab_r>.p1_tr,.tab_h{
  height: 60px;
  line-height: 60px;
}
.tab_h,.tab_r{
  width: 90%;
  margin-left: 5%;
  text-align: center;
  /* border:1px solid #eee; */

}
input[type='time']{
  border: none;
  outline: none;
  border-bottom: 1px solid #ccc;
  width: 40%;
  height: 30px;
  text-align: center;
}
.p1index_add{
  width: 90%;
  height: 30px;
  text-align: center;
  border: none;
  outline: none;
  border-bottom: 1px solid #ccc;

}
.p2_tr{
  width: 40%;
  border:1px solid #ccc;
  margin: 3%;
  display: inline-block;
  text-align: center;
  height: 40px;
  line-height: 40px;
  border-radius: 5px;
}
.p2_Select{
  border:1px solid #1f71a0;
  color:#1f71a0;

}
.p3_tr{
  height: 60px;
  line-height: 60px;
  /* border:1px solid #ccc; */

}
.p3_tr>div{
  display: inline-block;
}
.p3_tr>span{
  width: 30%;
  display: inline-block;
}
.yichang{
 width: 50px;
 height: 25px;
 border:1px solid #ccc;
 line-height: 20px;
 border-radius: 5px;
 font-size: 18px;

}
.yc_value{
  border-bottom: 1px solid #ccc;
  height: 40px;
  line-height: 40px;
  width: 150px;

}
.yc_value>input{
   border: none;
   outline: none;
   width: 75%;
  height: 30px;
  text-align: center;
}
.yc_color{
  width: 20px;
  height: 20px;
  border: 1px solid #ccc;
  border-radius: 5px;
  background-color: #D9001B;
}

.dashed{
  border-bottom: 1px dashed #ccc;
}
</style>